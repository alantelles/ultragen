# include @Core.Web.Router
# include @Core.Web.AppResponse
# include @Core.Web.Session
include @Core.Web
include 'handlers.ultra'

Session.key = 'BAHOLEROS'
Session.start()
$router = new Router()

$router.get('/', :index, Handlers.index)
$router.get('/redir', :redir, function(params)
    Session.flash('Teste')
    AppResponse.redirect('/')
end)
$router.post('/upload', :upload, Handlers.saveUploadedFile)
$router.post('/getbin', :getbin, function(params)
    $request[:body_content].save('copy.ultra')
    r = JSON.create({"saved": true})
    live r
end)
$router.getMatch().localize()
live handler(params)
Session.save()