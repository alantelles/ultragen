# necess√°rio automatizar tudo isso
# ideal seria via prelude

Router = $app.uses.Router
Request = $app.uses.Request
AppResponse = $app.uses.AppResponse
Session = $app.uses.Session

if (!assigned $app.routers.main)
    raise('No main router found in $app', 'Application')
end

$response = new AppResponse()

main = $app.routers.main
docs = $app.routers.docs
main.getMatch($request[:route], $request['method']).localize()
live handler(params)