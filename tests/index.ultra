include @Core.Brook.AppResponse
include @Core.Web.Router
include @Core.Web.MimeTypes
include @Core.Web.HttpStatus

r = new Router()
r.get('/', :index, function(params)
    include 'base.ultra.html'
    live Base('Teste')
end)
r.get("/static/:type/:filename", :static, function(params)
    params.localize()
    AppResponse.static('static/' + type + '/' + filename)
end)

r.get('/redir', :redir, function(params)
    # AppResponse.status = 307
    # AppResponse.clientRedirect('/zika', 5, "Você será redirecionado em 5 segundos", "Pode crê")
    AppResponse.static('any')
end)

r.get('/zika', :redir, function(params)
    live 'zika'
end)

r.getMatch().localize()
live handler(params)