include @Core.Brook.AppResponse
include @Core.Web.Router
include @Core.Web.MIMETypes
include @Core.Web.HTTPStatus

r = new Router()
r.get('/', :index, function(params)
    headers = {
        'x-zika': 'comi',
        'x-tika': 'maykao',
        'x-tops': 'juno'
    }
    AppResponse.contentType(MIMETypes.JSON)
    AppResponse.status = HTTPStatus.Created
    AppResponse.setHeaders(headers)
    AppResponse.$cookies['vira'] = "na raba toma tapao"
    AppResponse.$cookies['virax'] = "tobiruba"
    live JSON.create({:resp: "index"})
end)

r.get('/redir', :redir, function(params)
    AppResponse.status = 307
    AppResponse.redirect('/zika')
end)

r.get('/zika', :redir, function(params)
    live 'zika'
end)

r.getMatch().localize()
live handler(params)